(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"/0oa":function(t,e,n){"use strict";n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return B})),n.d(e,"a",(function(){return T})),n.d(e,"d",(function(){return R}));var o=n("ERkP"),i=n.n(o),r=n("AU4o"),c=n.n(r),a=n("j/s1"),u=n("RRpZ"),l=n("kdb8"),d=n("2FHh"),s=n("cf3O"),m=n("2zbF"),f=n("9e7o"),p=n("uDfI"),b=n("29el"),h=n("omit"),v=n("xpQu"),g=i.a.createElement,x=c()((function(){return Promise.all([n.e(14),n.e(153)]).then(n.bind(null,"MbeZ"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["MbeZ"]},modules:["./CommentEntryActionBarMoreMenu"]}}),j=a.e.div.withConfig({componentId:"jt7qse-0"})(["display:flex;align-items:center;margin-left:12px;"]),O=a.e.label.withConfig({componentId:"jt7qse-1"})(["display:flex;align-items:center;color:",";font-size:","px;cursor:pointer;user-select:none;","{margin-right:","px;fill:",";width:","px;height:","px;}&:hover{","{fill:",";}}"],(function(t){return t.theme.textLight}),(function(t){return t.theme.isMobile?13:14}),l.a,(function(t){return t.theme.isMobile?8:14}),(function(t){return t.active?t.theme.danger:t.theme.isMobile?"":t.theme.iconFillMedium}),(function(t){return t.theme.isMobile?24:28}),(function(t){return t.theme.isMobile?24:28}),l.a,(function(t){return!t.theme.isMobile&&t.theme.danger})),I=a.e.div.withConfig({componentId:"jt7qse-2"})(["background:",";width:1px;height:","px;margin:",";"],(function(t){return t.theme.borderBlackTransparent5}),(function(t){return t.theme.isMobile?16:24}),(function(t){return t.theme.isMobile?"0 2px 0 10px":"0 8px 0 16px"}));function w(t){var e=t.comment,n=t.post,o=Object(p.d)(),r=Object(v.a)(),c=Object(f.a)(m.a),a=Object(b.a)(n.forumAlias);return g(j,null,g(O,{onClick:function(){e&&(a(h.c.canReact)?r.bilanx.enqueue({event:"postCommentLiked",payload:{success:!1,position:"comment",postId:+e.postId,commentId:e.id,positive:!0}}):o(Object(s.d)({comment:e,position:"comment"})))},active:null===e||void 0===e?void 0:e.liked},g(d.a,null),e&&e.likeCount),c&&g(i.a.Fragment,null,g(I,null),g(x,{comment:e,post:n})))}var k=n("Bcuc"),M=i.a.createElement,C=c()((function(){return Promise.all([n.e(14),n.e(187)]).then(n.bind(null,"NHZm"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["NHZm"]},modules:["./CommentSuspiciousAuthor"]}}),E=a.e.div.withConfig({componentId:"sc-7fxob4-0"})(["display:flex;align-items:center;"]),y=a.e.div.withConfig({componentId:"sc-7fxob4-1"})(["padding-right:15px;"]),A=a.e.div.withConfig({componentId:"sc-7fxob4-2"})(["flex:1;overflow:hidden;"]),B=a.e.div.withConfig({componentId:"sc-7fxob4-3"})(["color:",";display:flex;align-items:center;",""],(function(t){return t.theme.newTextSemiDark}),(function(t){return t.theme.isMobile?Object(a.d)(["",""],t.theme.subtitle2):Object(a.d)(["",""],t.theme.subtitle1)})),T=a.e.div.withConfig({componentId:"sc-7fxob4-4"})(["color:",";font-size:","px;",";"],(function(t){return t.theme.textDefault}),(function(t){return t.theme.isMobile?12:14}),(function(t){return t.theme.ellipsis})),N=Object(a.e)(k.a).withConfig({componentId:"sc-7fxob4-5"})(["color:",";"],(function(t){return t.theme.textDefault})),z=function(t){var e=t.children,n=t.comment;return n.authorUid?M(k.a,{to:"/@".concat(n.authorUid)},e):M(i.a.Fragment,null,e)};function R(t){var e=t.comment,n=t.post,o=t.hideActionBar;return M(E,null,M(z,{comment:e},M(y,null,M(u.a,{size:40,source:e}))),e.isSuspiciousAccount?M(C,null):M(A,null,M(z,{comment:e},M(B,null,e?e.authorName:"")),M(T,null,n&&(e.hidden?e.timeString:M(N,{to:"/f/".concat(n.forumAlias,"/p/").concat(e.postId,"/b/").concat(e.floor)},"B",e.floor," | ",e.timeString)))),!e.hidden&&!o&&n&&M(w,{comment:e,post:n}))}},"2FHh":function(t,e,n){"use strict";var o=n("yDbQ"),i=n("TH+t"),r=n.n(i);e.a=Object(o.a)(r.a)},JWLz:function(t,e,n){"use strict";var o=n("AU4o"),i=n.n(o),r=n("ERkP"),c=n.n(r),a=n("j/s1"),u=n("Bcuc"),l=c.a.createElement,d=l(u.a,{to:"https://faq.dcard.tw/?p=798",target:"_blank"},"\u7533\u8a34"),s=function(){return l(c.a.Fragment,null,l("p",null,"\u9019\u5247\u56de\u61c9\u56e0\u300c\u4f7f\u7528\u8005\u63d0\u51fa\u7533\u8a34 \u300d\u5df2\u906d\u79fb\u9664\u3002"),l("p",null,"\u7576\u5167\u5bb9\u672a\u9055\u53cd Dcard \u7ad9\u898f\uff0c\u537b\u6709\u640d\u5bb3\u540d\u8b7d\u3001\u7aca\u53d6\u8096\u50cf\u6b0a\uff0f\u667a\u6167\u8ca1\u7522\u6b0a\u3001\u96b1\u79c1\u906d\u53d7\u4fb5\u64fe\u7b49\u7591\u616e\u6642\uff0c\u7576\u4e8b\u4eba\u53ef\u900f\u904e\u300c",d,"\u300d\u8acb\u6c42\u79fb\u9664\u3002"))},m=n("/0oa"),f=n("zg2M"),p=n("fAjh"),b=c.a.createElement,h=i()((function(){return n.e(26).then(n.bind(null,"JzrJ"))}),{loadableGenerated:{webpack:function(){return["JzrJ"]},modules:["/home/circleci/project/sites/web/modules/common/components/Formatter/DcardPostLink"]}}),v=a.e.div.withConfig({componentId:"pj3ky0-0"})(["color:",";font-size:18px;padding:",";border-bottom:1px solid ",";position:relative;"],(function(t){return t.theme.text}),(function(t){return t.full?"26px ".concat(t.theme.isMobile?20:30,"px"):"16px 0"}),(function(t){return t.noBorder?"transparent":t.theme.borderWhiteLight})),g=a.e.div.withConfig({componentId:"pj3ky0-1"})(["margin-top:20px;padding:10px 0;border-top:1px solid ",";border-bottom:1px solid ",";"],(function(t){return t.theme.borderWhiteLight}),(function(t){return t.theme.borderWhiteLight})),x=a.e.div.withConfig({componentId:"pj3ky0-2"})(["font-size:","px;line-height:30px;color:",";margin-bottom:3px;"],(function(t){return t.theme.isMobile?13:16}),(function(t){return t.theme.textLight})),j=a.e.div.withConfig({componentId:"pj3ky0-3"})(["padding-top:","px;word-break:break-all;",";color:",";line-height:28px;"],(function(t){return t.theme.isMobile?16:20}),(function(t){return t.theme.body1}),(function(t){return t.theme.newTextSemiDark})),O=function(t){var e=t.comment,n=t.post,o=t.full,i=t.noBorder,r=t.maxHeight,c={key:p.a.postComment,detail:n?n.id:"0"};return b(v,{full:o,noBorder:i},b(m.d,{comment:e,post:n,hideActionBar:o}),o&&n&&b(g,null,b(x,null,"\u6b64\u56de\u61c9\u4f4d\u65bc\u6587\u7ae0 B",e.floor),b(h,{id:n.id,fallbackForumAlias:n.forumAlias,source:c})),b(j,{maxHeight:r},"accused"===e.reportReason?b(s,null):b(f.a,{source:c},e.content)))},I=function(t,e){var n,o,i=t.comment||{},r=e.comment||{};return i.content===r.content&&(i.liked===r.liked&&(i.hidden===r.hidden&&(t.noBorder===e.noBorder&&(null===(n=t.post)||void 0===n?void 0:n.id)===(null===(o=e.post)||void 0===o?void 0:o.id))))};e.a=c.a.memo(O,I)},"TH+t":function(t,e){var n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 4A5.49 5.49 0 0012 6.344 5.49 5.49 0 007.5 4 5.5 5.5 0 002 9.5C2 16 12 22 12 22s10-6 10-12.5A5.5 5.5 0 0016.5 4z" fill-rule="evenodd"/></svg>';t.exports=n,e.default=n},cf3O:function(t,e,n){"use strict";n.d(e,"e",(function(){return x})),n.d(e,"c",(function(){return j})),n.d(e,"a",(function(){return I})),n.d(e,"g",(function(){return w})),n.d(e,"b",(function(){return k})),n.d(e,"d",(function(){return C})),n.d(e,"f",(function(){return E}));var o=n("zjfJ"),i=n("VtSi"),r=n.n(i),c=n("HbGN"),a=n("QsI/"),u=n("Czhu"),l=n("hcB2"),d=n("U7b8"),s=n("Nf2R"),m=n("1PvQ"),f=n("kWB/"),p=n("9w6I"),b=n("MKtF"),h=n("HAg6"),v=n("Nfkc"),g=n("pQ7i"),x=Object(l.b)(m.a.LIST_COMMENT,(function(t,e){var n=e.postId,o=e.popular,i=e.after,r=e.before,c=e.limit,a=Object(b.j)(t.getState(),"comment",Object(p.e)({postId:n,popular:o}));if(!(a.error||a.noMore||a.index.length)||i||r)return s.default.get(t,"/api/v2/posts/".concat(n,"/comments"),Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({},o&&{popular:!0}),c&&{limit:c}),i&&{after:i}),r&&{before:r}))}),(function(t,e){return Object(u.a)(Object(u.a)(Object(u.a)({},e&&{key:Object(b.b)(Object(p.e)(e))}),e&&!e.popular&&{sortIndexBy:p.g}),{},{refresh:null===e||void 0===e?void 0:e.refresh})})),j=Object(l.b)(m.a.GET_COMMENT,(function(t,e){var n=e.floor,o=e.postId;if(!t.getState().comment.data[Object(p.f)({floor:n,postId:o})])return s.default.get(t,"/api/v2/posts/".concat(o,"/comments"),{after:Math.max(n-1,0),limit:1}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t[0])return t[0];var e=new Error("Not found");return e.status=404,e.ok=!1,e.data={error:d.b.notFound,message:"Corresponding comment is not found"},Promise.reject(e)}))})),O=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g.b.bilanx.enqueue({event:"postCommentCreated",payload:{positive:!0,draft:!1,edit:n,postId:+t,commentId:e}})},I=Object(l.b)(m.a.CREATE_COMMENT,function(){var t=Object(a.a)(r.a.mark((function t(e,n){var o,i,a,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.forumAlias,a=n.postId,u=Object(c.a)(n,["forumAlias","postId"]),t.prev=1,t.next=4,s.default.post(e,"/api/v2/posts/".concat(a,"/comments"),u);case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(1),t.t1=null===t.t0||void 0===t.t0||null===(o=t.t0.data)||void 0===o?void 0:o.error,t.next=t.t1===d.b.cannotCommentWithSpecifiedIdentity||t.t1===d.b.cannotCommentWithWithoutIdentity?12:15;break;case 12:return e.dispatch(Object(v.b)({forumAlias:i,refresh:!0})),e.dispatch(h.b.actions.push({type:h.a.InvalidIdentity})),t.abrupt("break",15);case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}(),{event:{success:function(t,e){var n=t.postId;return O(n,e.id,!1)}},toast:{success:"\u56de\u61c9\u6210\u529f\uff01",failure:{element:"\u56de\u61c9\u5931\u6557\uff01",intent:f.a.danger}}}),w=Object(l.b)(m.a.UPDATE_COMMENT,(function(t,e){var n=e.commentId,o=e.content;return s.default.put(t,"/api/v2/comments/".concat(n),{content:o})}),{event:{success:function(t,e){var n=t.postId;return O(n,e.id,!0)}},toast:{success:"\u66f4\u65b0\u56de\u61c9\u6210\u529f\uff01",failure:{element:"\u66f4\u65b0\u56de\u61c9\u5931\u6557\uff01",intent:f.a.danger}},shouldUpdatePagination:!1}),k=Object(l.b)(m.a.DESTROY_COMMENT,(function(t,e){var n=e.comment;return s.default.delete(t,"/api/v2/comments/".concat(n.id)).then((function(){return Object(u.a)(Object(u.a)({},n),{},{hidden:!0})}))}),{toast:{success:"\u522a\u9664\u6210\u529f\uff01"}}),M=function(t,e){var n,o,i,r,c;return null!==(n=null===(o=t.getState())||void 0===o||null===(i=o.comment)||void 0===i||null===(r=i.data)||void 0===r||null===(c=r[Object(p.f)(e)])||void 0===c?void 0:c.liked)&&void 0!==n&&n},C=Object(l.b)(m.a.LIKE_COMMENT,(function(t,e){var n=e.comment;return M(t,n)?s.default.delete(t,"/api/v2/comments/".concat(n.id,"/like")):s.default.post(t,"/api/v2/comments/".concat(n.id,"/like"))}),(function(t){var e=function(e,n,o){g.b.bilanx.enqueue({event:"postCommentLiked",payload:{success:o,position:n,postId:+e.postId,commentId:e.id,positive:!M(t,e)}})};return{event:{success:function(t){var n=t.comment,o=t.position;return e(n,o,!0)},failure:function(t){var n=t.comment,o=t.position;return e(n,o,!1)}}}})),E=Object(l.b)(m.a.REPORT_COMMENT,(function(t,e){var n=e.id,o=e.reason,i=e.ruleId;return s.default.post(t,"/moderator/api/comment/".concat(n,"/report"),{reason:o,ruleId:i})}),{toast:{success:"\u56de\u61c9\u6aa2\u8209\u6210\u529f\uff01",failure:function(t){var e;return{element:(e={},Object(o.a)(e,d.b.reportOfficialMustBeGlobalRule,"\u6aa2\u8209\u5931\u6557\uff01"),Object(o.a)(e,d.b.commentReportDuplicate,"\u5df2\u7d93\u6aa2\u8209\u904e\u4e86\uff0c\u7121\u6cd5\u91cd\u8907\u6aa2\u8209\u5594\uff01"),e)[t.error]||"",intent:f.a.danger}}}})}}]);
