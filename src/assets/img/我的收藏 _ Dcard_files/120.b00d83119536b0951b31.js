(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[120,123,126,127,134,137],{"/CT9":function(t,e,n){"use strict";n.r(e);var o=n("ERkP"),r=n.n(o),i=n("j/s1"),a=n("uDfI"),c=n("QRZr"),u=n("/nHl"),s=n("vKNz"),l=n("0OTZ"),d=n("cf3O"),f=n("4iQh"),b=n("G5Zb"),p=n("Rg6t"),m=n("AwTW"),v=n("9e7o"),O=n("EDA9"),h=n("Cl/c"),j=r.a.createElement,g=Object(i.e)(c.a).withConfig({componentId:"ippdxu-0"})(["width:500px;"]);e.default=function(t){var e=t.isOpen,n=t.type,r=t.resource,i=t.closeModal,c=t.onSubmit,y=Object(a.d)(),C=Object(v.a)((function(t){return Object(O.b)(t,{stateKey:r.stateKey})})),I=Object(v.a)((function(t){return Object(O.a)(t,{stateKey:r.stateKey})})).loading,x=function(t){var e=t.type,n=t.resource;switch(e){case"post":return{title:"\u6aa2\u8209\u6587\u7ae0",description:"\u6aa2\u8209\u9019\u7bc7\u6587\u7ae0\u7684\u539f\u56e0\uff1f",createReport:function(t){var e=t.id,o=t.reason,r=t.alias;return Object(b.q)({id:n.id||"",reason:o,ruleId:e,alias:r})}};case"comment":return{title:"\u6aa2\u8209\u56de\u61c9",description:"\u6aa2\u8209\u9019\u7bc7\u56de\u61c9\u7684\u539f\u56e0\uff1f",createReport:function(t){var e=t.id,o=t.reason;return Object(d.f)({id:n.id||"",reason:o,ruleId:e})}};case"topic":return{title:"\u6aa2\u8209\u8a71\u984c",description:"\u6aa2\u8209\u9019\u500b\u8a71\u984c\u7684\u539f\u56e0\uff1f",createReport:function(t){var e=t.alias;return Object(p.c)({topic:n.id||"",reason:e})}};case"dcard":return{title:"\u6aa2\u8209 Dcard",description:"\u6aa2\u8209\u9019\u5f35 Dcard \u7684\u539f\u56e0\uff1f",createReport:function(t){var e=t.alias;return Object(f.d)({reason:e})}};case"story":return{title:"\u6aa2\u8209\u9650\u6642\u52d5\u614b",description:"\u6aa2\u8209\u9019\u7bc7\u9650\u6642\u52d5\u614b\u7684\u539f\u56e0\uff1f",createReport:function(t){var e=t.alias;return Object(m.c)({storyId:n.id||"",reason:e})}}}}({type:n,resource:r}),T=x.title,k=x.description,w=x.createReport;Object(o.useEffect)((function(){if(e)switch(n){case"post":case"comment":y(Object(l.b)({forumId:r.stateKey}));break;case"topic":y(Object(l.e)());break;case"dcard":y(Object(l.a)());break;case"story":y(Object(l.d)())}}),[y,r.stateKey,n,e]);return j(g,{isOpen:e,description:k,title:T,scrollable:!0,validates:{reason:[Object(h.k)()]},onClose:i,closeOnConfirm:!0,onConfirm:function(t){var e=t.reason,n=C.find((function(t){var n;return(null!==(n=t.id)&&void 0!==n?n:t.alias)===e}));if(n)return null===c||void 0===c||c(n.alias),y(w(n))}},I&&j(u.a,null),j(s.b,{name:"reason",options:C.map((function(t){var e;return{name:t.reason,value:null!==(e=t.id)&&void 0!==e?e:t.alias}}))}))}},"/nHl":function(t,e,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("j/s1"),a=n("ZBae"),c=r.a.createElement,u=i.e.div.withConfig({componentId:"sc-1vxpibn-0"})(["position:relative;height:","px;padding:","px 0;width:100%;"],(function(t){return t.minimal?64:120}),(function(t){return t.minimal?13:16})),s=[30,95,50,35];e.a=function(t){var e=t.minimal,n=e?2:4,o=e?36:16,r=(100-o*n)/(n-1);return c(u,{minimal:e},c(a.a,{responsive:!0,height:"100%",width:"100%"},s.map((function(t,e){return c("rect",{key:e,x:0,y:(r+o)*e,width:t,height:o})}))))}},"0OTZ":function(t,e,n){"use strict";n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return h})),n.d(e,"e",(function(){return j})),n.d(e,"d",(function(){return g})),n.d(e,"c",(function(){return y})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return I}));var o=n("HbGN"),r=n("zjfJ"),i=n("Czhu"),a=n("VtSi"),c=n.n(a),u=n("QsI/"),s=n("CZlo"),l=n.n(s),d=n("hcB2"),f=n("Nf2R"),b=n("1PvQ"),p=n("MKtF"),m=n("EDA9"),v=n("kWB/"),O=Object(d.b)(b.a.LIST_RULE,function(){var t=Object(u.a)(c.a.mark((function t(e,n){var o,r,i,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.forumId,r=Object(m.a)(e.getState(),{stateKey:o}),i=r.loading,a=r.index,!(i||a.length>0)){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",f.default.get(e,"/moderator/api/forum/".concat(o,"/rules")));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),(function(t,e){return{key:Object(p.b)({stateKey:null===e||void 0===e?void 0:e.forumId})}})),h=Object(d.b)(b.a.LIST_RULE,(function(){return Promise.resolve([{alias:"profileEmpty",reason:"\u5167\u5bb9\u7a7a\u767d"},{alias:"profileContent",reason:"\u7121\u610f\u7fa9\u7684\u5167\u5bb9\u3001\u6587\u5b57\u6216\u7b26\u865f"},{alias:"profileSexual",reason:"\u4e0d\u96c5\u3001\u6027\u6697\u793a\u7684\u6587\u5b57\u5167\u5bb9"},{alias:"photoNotReal",reason:"\u975e\u672c\u4eba\u6216\u975e\u771f\u4eba\u7167\u7247"},{alias:"photoNotClear",reason:"\u6234\u58a8\u93e1\u3001\u53e3\u7f69\u6216\u975e\u6e05\u695a\u7368\u7167"},{alias:"photoNudity",reason:"\u88f8\u9732\u3001\u7c97\u4fd7\u7b49\u4e0d\u7576\u884c\u70ba"},{alias:"photoOthers",reason:"\u5176\u4ed6\u4e0d\u5408\u9069\u7684\u7167\u7247\u5167\u5bb9"}])}),{key:Object(p.b)({stateKey:"dcard"})}),j=Object(d.b)(b.a.LIST_RULE,(function(){return Promise.resolve([{alias:"indecent",reason:"\u5305\u542b\u4e0d\u96c5\u5b57\u8a5e"},{alias:"insult",reason:"\u4e2d\u50b7\u3001\u6b67\u8996\u3001\u6311\u91c1\u6216\u8b3e\u7f75\u4ed6\u4eba"},{alias:"personal",reason:"\u4ea4\u63db\u500b\u4eba\u8cc7\u6599"},{alias:"wash",reason:"\u5927\u91cf\u6feb\u7528\u6216\u60e1\u610f\u4f7f\u7528"},{alias:"sex",reason:"\u8272\u60c5\u3001\u7325\u893b\u4e4b\u5167\u5bb9\u8b93\u4eba\u4e0d\u8212\u670d\uff0c\u9732\u9ede\u7167\u3001\u6027\u884c\u70ba\u7b49\u7b49"},{alias:"advertise",reason:"\u5ee3\u544a\u3001\u5546\u696d\u5ba3\u50b3\u4e4b\u5167\u5bb9"},{alias:"other",reason:"\u5176\u4ed6\u9055\u898f\u53ca\u9055\u6cd5\u7684\u9805\u76ee"}])}),{key:Object(p.b)({stateKey:"topic"})}),g=Object(d.b)(b.a.LIST_RULE,(function(){return Promise.resolve([{alias:"insult",reason:"\u4e2d\u50b7\u3001\u6b67\u8996\u3001\u6311\u91c1\u6216\u8b3e\u7f75\u4ed6\u4eba"},{alias:"uncomfortable",reason:"\u8272\u60c5\u6216\u4ee4\u4eba\u4e0d\u8212\u670d\u7684\u7167\u7247"},{alias:"personal",reason:"\u4ea4\u63db\u500b\u4eba\u8cc7\u6599"},{alias:"get_out_of_my_sight",reason:"\u6211\u4e0d\u60f3\u770b\u5230\u9019\u500b\u5167\u5bb9"}])}),{key:Object(p.b)({stateKey:"story"})}),y=Object(d.b)(b.a.LIST_RULE,function(){var t=Object(u.a)(c.a.mark((function t(e,n){var o,a,u,s,d,b,p;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.forumId,a=n.isGlobalRule,u=e.getState(),s=Object(m.a)(u,{stateKey:o,isGlobalRule:a}),d=s.loading,b=s.index,p=Object(m.c)(u,{stateKey:o,isGlobalRule:a}),!(d||b.length>0)){t.next=6;break}return t.abrupt("return",Promise.resolve(p));case 6:return t.abrupt("return",f.default.get(e,"/moderator/moderator/api/rules",Object(i.a)({forumId:o,hideDeleted:!0},!l()(a)&&Object(r.a)({},a?"globalRuleOnly":"forumRuleOnly",!0))));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),(function(t,e){return{key:Object(p.b)({stateKey:null===e||void 0===e?void 0:e.forumId,isGlobalRule:null===e||void 0===e?void 0:e.isGlobalRule})}})),C=Object(d.b)(b.a.UPDATE_FORUM_RULE,(function(t,e){var n=e.forumId,r=Object(o.a)(e,["forumId"]);return f.default.post(t,"/moderator/moderator/api/forum/".concat(n,"/rules"),r)}),(function(t,e){return{key:Object(p.b)({stateKey:null===e||void 0===e?void 0:e.forumId,isGlobalRule:!1}),toast:{success:"\u66f4\u65b0\u677f\u898f\u6210\u529f",failure:{intent:v.a.danger,element:"\u66f4\u65b0\u677f\u898f\u5931\u6557"}}}})),I=Object(d.b)(b.a.UPDATE_GLOBAL_RULE,(function(t,e){var n=e.forumId,r=Object(o.a)(e,["forumId"]);return f.default.post(t,"/moderator/moderator/api/forum/".concat(n,"/globalRules"),r)}),(function(t,e){return{key:Object(p.b)({stateKey:null===e||void 0===e?void 0:e.forumId,isGlobalRule:!0}),toast:{success:"\u66f4\u65b0\u7ad9\u898f\u6210\u529f",failure:{intent:v.a.danger,element:"\u66f4\u65b0\u7ad9\u898f\u5931\u6557"}}}}))},"28Xk":function(t,e,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("j/s1"),a=n("Nhhd"),c=n("Hr33"),u=r.a.createElement,s=i.e.div.withConfig({componentId:"sc-12ejwh0-0"})([""]),l=i.e.div.withConfig({componentId:"sc-12ejwh0-1"})(["padding-bottom:16px;"]);e.a=function(t){var e=t.className,n=t.align,o=t.showCloseButton,r=t.title,i=t.description,d=t.children,f=t.onClose;return u(s,{className:e},r&&u(l,null,u(c.b,{align:n,onClose:f,showCloseButton:o},r)),i&&u(a.Description,null,i),d)}},AwTW:function(t,e,n){"use strict";n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return C})),n.d(e,"d",(function(){return I})),n.d(e,"c",(function(){return x}));var o=n("zjfJ"),r=n("VtSi"),i=n.n(r),a=n("fGyu"),c=n("zygG"),u=n("Czhu"),s=n("QsI/"),l=n("Zl10"),d=n.n(l),f=n("hcB2"),b=n("xcB8"),p=n("1PvQ"),m=n("MKtF"),v=n("Nf2R"),O=n("kWB/"),h=n("2zbF"),j=n("U7b8");function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{forumAlias:t.forumAlias}}var y=Object(f.b)(p.a.LIST_STORY,(function(t,e){var n=e.limit,o=e.before,r=e.after,l=e.refresh,f=Object(b.b)(t.getState(),g(e));if(!(f.error||f.noMore||f.index.length)||l||r||o){var p=e.forumAlias?"/api/v2/stories/forums/".concat(e.forumAlias,"/stories"):"/api/v2/stories";return Object(s.a)(i.a.mark((function e(){var s,l,f,b,m,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.get(t,p,Object(u.a)(Object(u.a)(Object(u.a)({mediaType:"all"},n&&{limit:n}),r&&{after:r}),o&&{before:o}));case 2:return s=e.sent,l=d()(s,(function(t){return t.expired})),f=Object(c.a)(l,2),b=f[0],m=f[1],O=Math.max(0,30-m.length),e.abrupt("return",[].concat(Object(a.a)(m),Object(a.a)(b.slice(0,O))));case 6:case"end":return e.stop()}}),e)})))()}}),(function(t,e){return{key:Object(m.b)(g(e)),refresh:e&&!!e.refresh}})),C=Object(f.b)(p.a.LIKE_STORY,(function(t,e){var n=e.storyId,o=e.count,r=void 0===o?1:o;return v.default.post(t,"/api/v2/stories/".concat(n,"/like"),{count:r})})),I=Object(f.b)(p.a.VIEW_STORY,(function(t,e){var n,o,r,i,a=e.storyId;if(Object(h.a)(t.getState())&&!(null===(n=t.getState())||void 0===n||null===(o=n.story)||void 0===o||null===(r=o.data)||void 0===r||null===(i=r[a])||void 0===i?void 0:i.read))return v.default.post(t,"/api/v2/stories/".concat(a,"/view"))})),x=Object(f.b)(p.a.REPORT_STORY,(function(t,e){var n=e.storyId,o=e.reason;return v.default.post(t,"/api/v2/stories/".concat(n,"/reports"),{reason:o})}),{toast:{success:"\u6aa2\u8209\u5df2\u9001\u51fa",failure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{element:Object(o.a)({},j.b.identityCardNotPending,"\u4f60\u5df2\u7d93\u6aa2\u8209\u904e\u6b64\u9650\u6642\u52d5\u614b")[t.error]||"\u767c\u751f\u932f\u8aa4\u8acb\u7a0d\u5f8c\u518d\u8a66",intent:O.a.danger}}}})},EDA9:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return c}));var o=n("MKtF"),r=n("+l7i"),i=Object(o.g)("rule"),a=Object(o.h)("rule"),c=Object(r.createSelector)(i,(function(t){return t.map((function(t){var e,n,o,r,i;return{id:t.id,index:null!==(e=null===t||void 0===t?void 0:t.index)&&void 0!==e?e:-1,title:null!==(n=null===t||void 0===t?void 0:t.title)&&void 0!==n?n:t.reason,content:null!==(o=null===t||void 0===t?void 0:t.content)&&void 0!==o?o:"",bucketDays:null!==(r=null===t||void 0===t?void 0:t.bucketDays)&&void 0!==r?r:0,isGlobalRule:null!==(i=null===t||void 0===t?void 0:t.isGlobalRule)&&void 0!==i&&i}}))}))},QRZr:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var o=n("cxan"),r=n("Czhu"),i=n("VtSi"),a=n.n(i),c=n("QsI/"),u=n("HbGN"),s=n("ERkP"),l=n.n(s),d=n("K3fg"),f=n("sPdd"),b=n("mOs8"),p=n("mZcL"),m=l.a.createElement;function v(t){var e=t.className,n=t.inline,i=t.children,s=t.onConfirm,l=t.onClose,v=t.onError,O=t.closeOnConfirm,h=Object(u.a)(t,["className","inline","children","onConfirm","onClose","onError","closeOnConfirm"]),j=n?f.a:d.default,g=function(){var t=Object(c.a)(a.a.mark((function t(e,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!s){t.next=4;break}return t.next=4,s(e,n);case 4:O&&l&&l(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),v&&v(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}();return m(b.a,Object(o.a)({},h,{onSubmit:g}),(function(t){return m(j,Object(o.a)({className:e,disableConfirm:!t.valid,onConfirm:t.form.submit,onClose:l,confirmLoading:t.submitting,showCloseButton:!1,confirmText:"\u5b8c\u6210",align:p.a.CENTER},h),m("form",{onSubmit:t.handleSubmit},"function"===typeof i?i(Object(r.a)({},t)):i))}))}},Rg6t:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return O})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return g}));var o=n("Czhu"),r=n("zjfJ"),i=n("hcB2"),a=n("1PvQ"),c=n("Nf2R"),u=n("kWB/"),s=n("U7b8"),l=n("MKtF"),d=n("uv0x"),f=n("pQ7i"),b=Object(i.b)(a.a.GET_TOPIC,(function(t,e){var n,o,r,i=e.topic,a=null===(n=t.getState())||void 0===n||null===(o=n.topic)||void 0===o||null===(r=o.data)||void 0===r?void 0:r[i];if(!a||a.subscribed&&!a.notificationType)return c.default.get(t,"/api/v2/tagging/topics/".concat(encodeURIComponent(i),"/stat"))})),p=function(t,e,n,o){f.b.bilanx.enqueue({event:"topicFollowed",payload:{success:o,position:n,catName:t,action:e}})},m=Object(i.b)(a.a.SUBSCRIBE_TOPIC,(function(t,e){var n=e.topic;return c.default.post(t,"/api/v2/tagging/topics/".concat(encodeURIComponent(n),"/subscribe"))}),(function(t,e){return{event:{success:function(t,e){var n=t.position,o=t.topic,r=e.notificationType;p(o,"follow",n,!0),p(o,d.a[r],n,!0)},failure:function(t){var e=t.position,n=t.topic;return p(n,"follow",e,!1)}},toast:{success:function(){return{element:"\u8ffd\u8e64\u8a71\u984c\u6210\u529f\uff01"}}}}})),v=Object(i.b)(a.a.UNSUBSCRIBE_TOPIC,(function(t,e){var n=e.topic;return c.default.delete(t,"/api/v2/tagging/topics/".concat(encodeURIComponent(n),"/subscribe"))}),(function(t,e){return{event:{success:function(t){var e=t.position,n=t.topic;return p(n,"unfollow",e,!0)},failure:function(t){var e=t.position,n=t.topic;return p(n,"unfollow",e,!1)}},toast:{success:function(){return{element:"\u53d6\u6d88\u8ffd\u8e64\u8a71\u984c\u6210\u529f\uff01"}}}}})),O=Object(i.b)(a.a.UPDATE_TOPIC_SUBSCRIPTION,(function(t,e){var n=e.topic,o=e.notificationType;return c.default.put(t,"/api/v2/tagging/topics/".concat(encodeURIComponent(n),"/subscribe"),{notificationType:o})}),(function(t,e){return{event:{success:function(t){var e=t.notificationType,n=t.position,o=t.topic;return p(o,d.a[e],n,!0)},failure:function(t){var e=t.notificationType,n=t.position,o=t.topic;return p(o,d.a[e],n,!1)}},toast:{success:function(){return{element:(null===e||void 0===e?void 0:e.toastMessage)?e.toastMessage:"all"===(null===e||void 0===e?void 0:e.notificationType)?"\u958b\u555f\u65b0\u6587\u7ae0\u901a\u77e5\u6210\u529f\uff01":"trending"===(null===e||void 0===e?void 0:e.notificationType)?"\u958b\u555f\u500b\u4eba\u5316\u6587\u7ae0\u901a\u77e5\u6210\u529f\uff01":"\u95dc\u9589\u5168\u90e8\u6587\u7ae0\u901a\u77e5\u6210\u529f\uff01",type:"snackbar"}}}}})),h=Object(i.b)(a.a.REPORT_TOPIC,(function(t,e){var n=e.topic,o=e.reason;return c.default.post(t,"/api/v2/tagging/topics/".concat(encodeURIComponent(n),"/reports"),{reason:o})}),{toast:{success:"\u8a71\u984c\u6aa2\u8209\u6210\u529f\uff01",failure:function(t){return{element:Object(r.a)({},s.b.topicReportTwice,"\u4f60\u5df2\u7d93\u6aa2\u8209\u904e\u6b64\u8a71\u984c\uff0c\u6211\u5011\u5c07\u5118\u901f\u5be9\u67e5")[t.error],intent:u.a.danger}}}}),j={keyForLoadMore:"before",stateKey:"topic"},g=Object(i.b)(a.a.LIST_MY_TOPIC,(function(t,e){var n=Object(l.j)(t.getState(),"topic"),r=e.limit,i=e.before,a=e.after;if(Object(l.c)(n,e)){var u=t.getState().topic.data[n.index[0]].id;return c.default.get(t,"/api/v2/me/topics/subscriptions",{limit:3,after:u})}return c.default.get(t,"/api/v2/me/topics/subscriptions",Object(o.a)(Object(o.a)(Object(o.a)({},r&&{limit:r}),i&&{before:i}),a&&{after:a}))}),(function(t,e){return Object(o.a)({},Object(l.e)(t,e,j))}))},Zl10:function(t,e,n){var o=n("8uyH")((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));t.exports=o},cf3O:function(t,e,n){"use strict";n.d(e,"e",(function(){return j})),n.d(e,"c",(function(){return g})),n.d(e,"a",(function(){return C})),n.d(e,"g",(function(){return I})),n.d(e,"b",(function(){return x})),n.d(e,"d",(function(){return k})),n.d(e,"f",(function(){return w}));var o=n("zjfJ"),r=n("VtSi"),i=n.n(r),a=n("HbGN"),c=n("QsI/"),u=n("Czhu"),s=n("hcB2"),l=n("U7b8"),d=n("Nf2R"),f=n("1PvQ"),b=n("kWB/"),p=n("9w6I"),m=n("MKtF"),v=n("HAg6"),O=n("Nfkc"),h=n("pQ7i"),j=Object(s.b)(f.a.LIST_COMMENT,(function(t,e){var n=e.postId,o=e.popular,r=e.after,i=e.before,a=e.limit,c=Object(m.j)(t.getState(),"comment",Object(p.e)({postId:n,popular:o}));if(!(c.error||c.noMore||c.index.length)||r||i)return d.default.get(t,"/api/v2/posts/".concat(n,"/comments"),Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({},o&&{popular:!0}),a&&{limit:a}),r&&{after:r}),i&&{before:i}))}),(function(t,e){return Object(u.a)(Object(u.a)(Object(u.a)({},e&&{key:Object(m.b)(Object(p.e)(e))}),e&&!e.popular&&{sortIndexBy:p.g}),{},{refresh:null===e||void 0===e?void 0:e.refresh})})),g=Object(s.b)(f.a.GET_COMMENT,(function(t,e){var n=e.floor,o=e.postId;if(!t.getState().comment.data[Object(p.f)({floor:n,postId:o})])return d.default.get(t,"/api/v2/posts/".concat(o,"/comments"),{after:Math.max(n-1,0),limit:1}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t[0])return t[0];var e=new Error("Not found");return e.status=404,e.ok=!1,e.data={error:l.b.notFound,message:"Corresponding comment is not found"},Promise.reject(e)}))})),y=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.b.bilanx.enqueue({event:"postCommentCreated",payload:{positive:!0,draft:!1,edit:n,postId:+t,commentId:e}})},C=Object(s.b)(f.a.CREATE_COMMENT,function(){var t=Object(c.a)(i.a.mark((function t(e,n){var o,r,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.forumAlias,c=n.postId,u=Object(a.a)(n,["forumAlias","postId"]),t.prev=1,t.next=4,d.default.post(e,"/api/v2/posts/".concat(c,"/comments"),u);case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(1),t.t1=null===t.t0||void 0===t.t0||null===(o=t.t0.data)||void 0===o?void 0:o.error,t.next=t.t1===l.b.cannotCommentWithSpecifiedIdentity||t.t1===l.b.cannotCommentWithWithoutIdentity?12:15;break;case 12:return e.dispatch(Object(O.b)({forumAlias:r,refresh:!0})),e.dispatch(v.b.actions.push({type:v.a.InvalidIdentity})),t.abrupt("break",15);case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}(),{event:{success:function(t,e){var n=t.postId;return y(n,e.id,!1)}},toast:{success:"\u56de\u61c9\u6210\u529f\uff01",failure:{element:"\u56de\u61c9\u5931\u6557\uff01",intent:b.a.danger}}}),I=Object(s.b)(f.a.UPDATE_COMMENT,(function(t,e){var n=e.commentId,o=e.content;return d.default.put(t,"/api/v2/comments/".concat(n),{content:o})}),{event:{success:function(t,e){var n=t.postId;return y(n,e.id,!0)}},toast:{success:"\u66f4\u65b0\u56de\u61c9\u6210\u529f\uff01",failure:{element:"\u66f4\u65b0\u56de\u61c9\u5931\u6557\uff01",intent:b.a.danger}},shouldUpdatePagination:!1}),x=Object(s.b)(f.a.DESTROY_COMMENT,(function(t,e){var n=e.comment;return d.default.delete(t,"/api/v2/comments/".concat(n.id)).then((function(){return Object(u.a)(Object(u.a)({},n),{},{hidden:!0})}))}),{toast:{success:"\u522a\u9664\u6210\u529f\uff01"}}),T=function(t,e){var n,o,r,i,a;return null!==(n=null===(o=t.getState())||void 0===o||null===(r=o.comment)||void 0===r||null===(i=r.data)||void 0===i||null===(a=i[Object(p.f)(e)])||void 0===a?void 0:a.liked)&&void 0!==n&&n},k=Object(s.b)(f.a.LIKE_COMMENT,(function(t,e){var n=e.comment;return T(t,n)?d.default.delete(t,"/api/v2/comments/".concat(n.id,"/like")):d.default.post(t,"/api/v2/comments/".concat(n.id,"/like"))}),(function(t){var e=function(e,n,o){h.b.bilanx.enqueue({event:"postCommentLiked",payload:{success:o,position:n,postId:+e.postId,commentId:e.id,positive:!T(t,e)}})};return{event:{success:function(t){var n=t.comment,o=t.position;return e(n,o,!0)},failure:function(t){var n=t.comment,o=t.position;return e(n,o,!1)}}}})),w=Object(s.b)(f.a.REPORT_COMMENT,(function(t,e){var n=e.id,o=e.reason,r=e.ruleId;return d.default.post(t,"/moderator/api/comment/".concat(n,"/report"),{reason:o,ruleId:r})}),{toast:{success:"\u56de\u61c9\u6aa2\u8209\u6210\u529f\uff01",failure:function(t){var e;return{element:(e={},Object(o.a)(e,l.b.reportOfficialMustBeGlobalRule,"\u6aa2\u8209\u5931\u6557\uff01"),Object(o.a)(e,l.b.commentReportDuplicate,"\u5df2\u7d93\u6aa2\u8209\u904e\u4e86\uff0c\u7121\u6cd5\u91cd\u8907\u6aa2\u8209\u5594\uff01"),e)[t.error]||"",intent:b.a.danger}}}})},sPdd:function(t,e,n){"use strict";var o=n("cxan"),r=n("fGyu"),i=n("VtSi"),a=n.n(i),c=n("QsI/"),u=n("HbGN"),s=n("nnm9"),l=n.n(s),d=n("ERkP"),f=n.n(d),b=n("K3fg"),p=n("Dso+"),m=n("28Xk"),v=f.a.createElement;e.a=function(t){var e=t.className,n=t.children,i=t.showConfirm,s=void 0===i||i,d=t.confirmText,f=void 0===d?b.DEFAULT_CONFIRM_TEXT:d,O=t.confirmIntent,h=void 0===O?p.b.PRIMARY:O,j=t.confirmLoading,g=void 0!==j&&j,y=t.closeOnConfirm,C=void 0!==y&&y,I=t.disableConfirm,x=void 0!==I&&I,T=t.blockConfirmButton,k=void 0!==T&&T,w=t.showCancel,R=void 0===w||w,E=t.cancelText,S=void 0===E?b.DEFAULT_CANCEL_TEXT:E,N=t.cancelIntent,_=t.closeOnCancel,L=void 0===_||_,P=t.onConfirm,M=void 0===P?l.a:P,K=t.onCancel,U=void 0===K?l.a:K,B=t.onClose,z=void 0===B?l.a:B,A=Object(u.a)(t,["className","children","showConfirm","confirmText","confirmIntent","confirmLoading","closeOnConfirm","disableConfirm","blockConfirmButton","showCancel","cancelText","cancelIntent","closeOnCancel","onConfirm","onCancel","onClose"]),D=function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:L&&z();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,M();case 3:C&&z();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=[].concat(Object(r.a)(R?[{onClick:D,intent:N||p.b.TEXT_BLACK,children:S}]:[]),Object(r.a)(s?[{onClick:G,intent:h,children:f,disable:x,loading:g,block:k}]:[]));return v(m.a,Object(o.a)({className:e,onClose:z},A),n,Object(b.renderConfirmFooter)(F))}},vKNz:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var o=n("cxan"),r=n("ERkP"),i=n.n(r),a=n("j/s1"),c=n("hzn3"),u=i.a.createElement,s=a.e.div.withConfig({componentId:"sc-1x6sxp-0"})(["display:",";grid-gap:0;"],(function(t){return t.inline?"block":"grid"})),l=a.e.label.withConfig({componentId:"sc-1x6sxp-1"})(["display:",";align-items:center;margin-right:","px;min-height:44px;cursor:pointer;min-width:0;"],(function(t){return t.inline?"inline-flex":"flex"}),(function(t){return t.inline?20:0})),d=a.e.input.attrs({type:"radio"}).withConfig({componentId:"sc-1x6sxp-2"})(["-moz-appearance:initial;display:inline-block;height:","px;width:","px;position:relative;margin:0 8px;min-width:0;visibility:hidden;&:before{position:absolute;display:block;box-sizing:border-box;content:'';top:0;left:0;height:100%;width:100%;border:2px solid ",";border-radius:50%;visibility:visible;cursor:pointer;}&:after{position:absolute;display:block;box-sizing:border-box;content:'';top:50%;left:50%;transform:translate(-50%,-50%);height:50%;width:50%;border-radius:50%;visibility:visible;background-color:transparent;transition:",";cursor:pointer;}&:checked:before{border-color:",";}&:checked:after{background-color:",";}"],(function(t){return t.size}),(function(t){return t.size}),(function(t){return t.disabled?t.theme.newTextLight:t.theme.newTextSemiLight}),(function(t){return"background-color ".concat(t.theme.shortDuration," ").concat(t.theme.bezier)}),(function(t){return t.disabled?t.theme.newTextLight:t.theme.mainLight}),(function(t){return t.disabled?t.theme.newTextLight:t.theme.mainLight})),f=a.e.div.withConfig({componentId:"sc-1x6sxp-3"})(["color:",";",";flex:1;min-width:0;white-space:break-all;"],(function(t){return t.disabled?t.theme.newTextSemiLight:t.theme.textDefault}),(function(t){return t.theme.subtitle1})),b=function(t){var e=t.name,n=t.value,o=t.size,r=t.inline,a=t.input,c=t.disabled,s=t.component,b=t.body;return u(i.a.Fragment,null,u(l,{title:e,inline:r},u(d,{disabled:c,size:o,checked:a.checked,value:n,onChange:a.onChange}),u(f,{disabled:c},s||e)),b)};e.b=function(t){var e=t.className,n=t.name,r=t.options,i=t.inline,a=t.size,l=void 0===a?20:a,d=t.disabled;return u(s,{className:e,inline:i},r.map((function(t,e){return u(c.a,{key:e,name:n,type:"radio",value:t.value},(function(e){return u(b,Object(o.a)({name:t.name,value:t.value,size:l,inline:i,disabled:t.disabled||d,component:t.component,body:t.body},e))}))})))}},xcB8:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var o=n("MKtF"),r=Object(o.g)("story"),i=Object(o.h)("story")}}]);
